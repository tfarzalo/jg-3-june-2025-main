import{a as e,j as r}from"./index-nRXVoRx_.js";import{r as t}from"./react-vendor--AdGielI.js";import{L as o}from"./leaflet-DrIUZV5B.js";function n({address:n,className:s=""}){const a=t.useRef(null),l=t.useRef(null),c=t.useRef(null),{theme:i}=e(),u=t.useRef(!0);return t.useEffect((()=>{u.current=!0;const e=a.current;if(!e||!n)return;const r=o.map(e,{center:[35.2271,-80.8431],zoom:13,zoomControl:!1,scrollWheelZoom:!1,dragging:!1});o.control.zoom({position:"topright"}).addTo(r),o.tileLayer("dark"===i?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r),l.current=r,r.on("click",(()=>{r.scrollWheelZoom.enable(),r.dragging.enable()})),r.on("mouseout",(()=>{r.scrollWheelZoom.disable(),r.dragging.disable()}));return(async()=>{try{const e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n)}`),t=await e.json();if(u.current&&t&&t.length>0){const{lat:e,lon:n}=t[0],s=parseFloat(e),a=parseFloat(n);isNaN(s)||isNaN(a)||!l.current||(r.setView([s,a],15),c.current&&c.current.remove(),c.current=o.marker([s,a]).addTo(r))}}catch(e){}})(),()=>{u.current=!1,l.current&&(l.current.remove(),l.current=null)}}),[n,i]),r.jsx("div",{ref:a,className:`w-full h-[300px] rounded-lg overflow-hidden ${s}`,style:{visibility:"visible",display:"block"}})}export{n as P};
