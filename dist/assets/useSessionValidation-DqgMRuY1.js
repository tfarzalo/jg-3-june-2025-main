import{r as e}from"./react-vendor-BmeRVKJv.js";import{u as s,s as t,b as i}from"./index-DSvJvUB2.js";function a(){const{session:a,initialized:o}=s();e.useEffect((()=>{(async()=>{if(o)try{const{data:{session:e},error:s}=await t.auth.getSession();if(s)return;if(e){const s=new Date(1e3*e.expires_at);if(s<=new Date){const{data:e,error:s}=await t.auth.refreshSession();if(s||!e.session){i.error("Your session has expired. Please sign in again.");const e="https://tbwtfimnbmvbgesidbxh.supabase.co"?.split("//")[1]?.split(".")[0];e&&localStorage.removeItem(`sb-${e}-auth-token`),setTimeout((()=>{window.location.href="/auth"}),1e3)}}}else a&&(i.error("Authentication error. Please sign in again."),setTimeout((()=>{window.location.href="/auth"}),1e3))}catch(e){}})()}),[a,o])}export{a as u};
