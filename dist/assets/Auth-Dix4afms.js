import{u as e,j as r,b as s}from"./index-DSvJvUB2.js";import{r as a}from"./react-vendor-BmeRVKJv.js";import"./supabase-c3qFLfUQ.js";function t(){const{signIn:t,session:l,loading:n}=e(),[o,d]=a.useState(!1),[i,c]=a.useState(""),[u,m]=a.useState(""),[x,b]=a.useState(null),g=a.useRef(!0),h=a.useRef(null);a.useEffect((()=>()=>{g.current=!1,h.current&&window.clearTimeout(h.current)}),[]);return n?r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-[#0F172A] flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l?r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-[#0F172A] flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-[#1E293B] p-8 rounded-xl shadow-lg text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You're already signed in. Redirecting to dashboard..."}),r.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Dashboard"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-[#0F172A] flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-[#1E293B] p-8 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center",children:r.jsx("img",{src:"https://tbwtfimnbmvbgesidbxh.supabase.co/storage/v1/object/public/files/fb38963b-c67e-4924-860b-312045d19d2f/1750132407578_jg-logo-icon.png",alt:"JG Portal Logo",className:"h-16 w-auto object-contain",onError:e=>{const r=e.currentTarget;r.style.display="none";const s=r.parentElement;s&&(s.innerHTML='\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="h-8 w-8 text-gray-400">\n                      <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path>\n                      <path d="M7 7h.01"></path>\n                    </svg>\n                  ')}})}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"JG Portal 2.0"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your account"})]}),x&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-500/50 text-red-700 dark:text-red-200 px-4 py-3 rounded",children:x}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i&&u)try{d(!0),b(null);const e=await t(i,u);if(!e.success)throw d(!1),new Error(e.error);s.success("Signed in successfully")}catch(r){b(r.message||"Failed to sign in"),s.error(r.message||"Failed to sign in"),d(!1)}else b("Please enter both email and password")},className:"mt-8 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),r.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:e=>c(e.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 text-base bg-white dark:bg-[#0F172A]",placeholder:"Email address"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:e=>m(e.target.value),className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 text-base bg-white dark:bg-[#0F172A]",placeholder:"Password"})]})]}),r.jsx("div",{children:r.jsxs("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[o?r.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:r.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):r.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:r.jsx("svg",{className:"h-5 w-5 text-blue-500 group-hover:text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),"Sign In"]})})]})]})})}export{t as Auth,t as default};
